(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){"use strict";(function(e){var n=a(0),r=a.n(n),o=a(223),i=a(13),c=a(12),s=a(221),l=a(222),m=Object(c.createMuiTheme)({palette:{primary:{light:"#8eacbb",main:"#000000",dark:"#34515e",contrastText:"#fff"},secondary:{light:"#e7ff8c",main:"#b2ff59",dark:"#7ecb20",contrastText:"#000"},openTitle:"black",protectedTitle:s.lightGreen[400],type:"light"}});t.a=Object(l.hot)(e)(function(){return r.a.createElement(i.a,null,r.a.createElement(c.MuiThemeProvider,{theme:m},r.a.createElement(o.a,null)))})}).call(this,a(136)(e))},215:function(e,t,a){e.exports=a.p+"static/media/logo.d3bf05f8.png"},223:function(e,t,a){"use strict";var n=a(5),r=a(6),o=a(8),i=a(7),c=a(9),s=a(0),l=a.n(s),m=a(56),p=a(12),u=a(31),d=a.n(u),h=a(32),g=a.n(h),f=a(2),E=a.n(f),b=a(33),y=a.n(b),v=a(13),S=a(210),x=a.n(S),j=a(28),C=a.n(j),O=a(21),N=a.n(O),w=a(10),I=a.n(w),k=a(208),T=a.n(k),A=a(209),D=a.n(A),_={itemTotal:function(){return"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0},addItem:function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push({product:e,quantity:1,shop:e.shop._id}),localStorage.setItem("cart",JSON.stringify(a)),t())},updateCart:function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a[e].quantity=t,localStorage.setItem("cart",JSON.stringify(a)))},getCart:function(){return"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]},removeItem:function(e){var t=[];return"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.splice(e,1),localStorage.setItem("cart",JSON.stringify(t))),t},emptyCart:function(e){"undefined"!==typeof window&&(localStorage.removeItem("cart"),e())}},B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={redirect:!1},a.addToCart=function(){_.addItem(a.props.item,function(){a.setState({redirect:!0})})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(this.state.redirect)return l.a.createElement(m.a,{to:"/cart"});var e=this.props.classes;return l.a.createElement("span",null,this.props.item.quantity>=0?l.a.createElement(y.a,{color:"primary",dense:"dense",onClick:this.addToCart},l.a.createElement(T.a,{className:this.props.cartStyle||e.iconButton})):l.a.createElement(y.a,{disabled:!0,color:"primary",dense:"dense"},l.a.createElement(D.a,{className:this.props.cartStyle||e.disabledIconButton})))}}]),t}(s.Component),L=Object(p.withStyles)(function(e){return{iconButton:{width:"28px",height:"28px"},disabledIconButton:{color:"#7f7563",width:"28px",height:"28px"}}})(B),F=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},this.props.title),this.props.products.map(function(t,a){return l.a.createElement("span",{key:a},l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardMedia,{className:e.cover,image:"https://lampgram.com/api-server/product/image/"+t._id,title:t.name}),l.a.createElement("div",{className:e.details},l.a.createElement(w.CardContent,{className:e.content},l.a.createElement(v.b,{to:"/product/"+t._id},l.a.createElement(E.a,{type:"title",component:"h3",className:e.productTitle,color:"primary"},t.name)),l.a.createElement(v.b,{to:"/shops/"+t.shop._id},l.a.createElement(E.a,{type:"subheading",className:e.subheading},l.a.createElement(C.a,{className:e.icon},"shopping_basket")," ",t.shop.name)),l.a.createElement(E.a,{component:"p",className:e.date},"Added on ",new Date(t.created).toDateString())),l.a.createElement("div",{className:e.controls},l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.price,color:"primary"}," ",t.price),l.a.createElement("span",{className:e.actions},l.a.createElement(v.b,{to:"/product/"+t._id},l.a.createElement(y.a,{color:"primary",dense:"dense"},l.a.createElement(x.a,{className:e.iconButton}))),l.a.createElement(L,{item:t}))))),l.a.createElement(N.a,null))})))}}]),t}(s.Component),P=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({padding:e.spacing.unit,paddingBottom:24,backgroundColor:"white"}),title:{margin:"".concat(4*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px"),color:e.palette.openTitle,fontSize:"1.1em"},viewButton:{verticalAlign:"middle"},card:{width:"100%",display:"inline-flex"},details:{display:"inline-block",width:"100%"},content:{flex:"1 0 auto",padding:"16px 8px 0px"},cover:{width:"65%",height:130,margin:"8px"},controls:{marginTop:"8px"},date:{color:"rgba(0, 0, 0, 0.4)"},icon:{verticalAlign:"sub"},iconButton:{width:"28px",height:"28px"},productTitle:{fontSize:"1.15em",marginBottom:"5px"},subheading:{color:"rgba(00, 00, 00, 0.8)"},actions:{float:"right",marginRight:"6px"},price:{display:"inline",lineHeight:"3",paddingLeft:"8px",color:e.palette.text.secondary}}})(F),z=a(101),R=a.n(z),M=function(e,t,a){return fetch("https://lampgram.com/api-server/products/by/"+e.shopId,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},body:a}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},q=function(e){return fetch("https://lampgram.com/api-server/products/"+e.productId,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},G=function(e,t,a){return fetch("https://lampgram.com/api-server/product/"+e.shopId+"/"+e.productId,{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},body:a}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},W=function(e,t){return fetch("https://lampgram.com/api-server/product/"+e.shopId+"/"+e.productId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},J=function(e){return fetch("https://lampgram.com/api-server/products/by/"+e.shopId,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},U=function(){return fetch("https://lampgram.com/api-server/products/latest",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Q=function(e){return fetch("https://lampgram.com/api-server/products/related/"+e.productId,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},V=function(){return fetch("https://lampgram.com/api-server/products/categories",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},H=function(e){var t=R.a.stringify(e);return fetch("https://lampgram.com/api-server/products?"+t,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Y=a(35),K=a(77),Z=a.n(K),$=a(19),X=a.n($),ee=a(15),te=a.n(ee),ae=a(211),ne=a.n(ae),re=a(64),oe=a.n(re),ie=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},this.props.products.length>0?l.a.createElement("div",{className:e.container},l.a.createElement(oe.a,{cellHeight:200,className:e.gridList,cols:3},this.props.products.map(function(t,a){return l.a.createElement(re.GridListTile,{key:a,className:e.tile},l.a.createElement(v.b,{to:"/product/"+t._id},l.a.createElement("img",{className:e.image,src:"https://lampgram.com/api-server/product/image/"+t._id,alt:t.name})),l.a.createElement(re.GridListTileBar,{className:e.tileBar,title:l.a.createElement(v.b,{to:"/product/"+t._id,className:e.tileTitle},t.name),subtitle:l.a.createElement("span",null," ",t.price)}))}))):this.props.searched&&l.a.createElement(E.a,{type:"subheading",component:"h4",className:e.title},"No products found! :("))}}]),t}(s.Component),ce=Object(p.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",background:e.palette.background.paper,textAlign:"left",padding:"0 8px"},container:{minWidth:"100%",paddingBottom:"14px"},gridList:{width:"100%",minHeight:200,padding:"16px 0 10px"},title:{padding:"".concat(3*e.spacing.unit,"px ").concat(2.5*e.spacing.unit,"px ").concat(2*e.spacing.unit,"px"),color:"theme.palette.openTitle",width:"100%"},tile:{textAlign:"center"},image:{height:"100%"},tileBar:{backgroundColor:"rgba(0, 0, 0, 0.72)",textAlign:"left"},tileTitle:{fontSize:"1.1em",marginBottom:"5px",color:"rgb(189, 222, 219)",display:"block"}}})(ie),se=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={category:"",search:"",results:[],searched:!1},a.handleChange=function(e){return function(t){a.setState(Object(Y.a)({},e,t.target.value))}},a.search=function(){a.state.search&&H({search:a.state.search||void 0,category:a.state.category}).then(function(e){e.error?console.log(e.error):a.setState({results:e,searched:!0})})},a.enterKey=function(e){13===e.keyCode&&(e.preventDefault(),a.search())},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:e.card},l.a.createElement(X.a,{id:"select-category",select:!0,label:"Select category",className:e.textField,value:this.state.category,onChange:this.handleChange("category"),SelectProps:{MenuProps:{className:e.menu}},margin:"normal"},l.a.createElement(Z.a,{value:"All"},"All"),this.props.categories.map(function(e){return l.a.createElement(Z.a,{key:e,value:e},e)})),l.a.createElement(X.a,{id:"search",label:"Search products",type:"search",onKeyDown:this.enterKey,onChange:this.handleChange("search"),className:e.searchField,margin:"normal"}),l.a.createElement(te.a,{variant:"raised",color:"primary",className:e.searchButton,onClick:this.search},l.a.createElement(ne.a,null)),l.a.createElement(N.a,null),l.a.createElement(ce,{products:this.state.results,searched:this.state.searched})))}}]),t}(s.Component),le=Object(p.withStyles)(function(e){return{card:{margin:"auto",textAlign:"center",paddingTop:10,backgroundColor:"white"},menu:{width:200},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:130,verticalAlign:"bottom",marginBottom:"20px"},searchField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300,marginBottom:"20px"},searchButton:{minWidth:"20px",height:"30px",padding:"0 8px"}}})(se),me=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={products:[],selected:""},a.componentWillReceiveProps=function(e){a.setState({selected:e.categories[0]}),H({category:e.categories[0]}).then(function(e){e.error?console.log(e.error):a.setState({products:e})})},a.listbyCategory=function(e){return function(t){a.setState({selected:e}),H({category:e}).then(function(e){e.error?console.log(e.error):a.setState({products:e})})}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:t.card},l.a.createElement(E.a,{type:"title",className:t.title},"Explore by category"),l.a.createElement("div",{className:t.root},l.a.createElement(oe.a,{className:t.gridList,cols:4},this.props.categories.map(function(a,n){return l.a.createElement(re.GridListTile,{key:n,className:t.tileTitle,onClick:e.listbyCategory(a),style:{height:"40px",backgroundColor:e.state.selected===a?"black":"rgba(0, 0, 0, 0.8)"}},l.a.createElement("span",{className:t.link},a,"  ",l.a.createElement(C.a,{className:t.icon},e.state.selected===a&&"arrow_drop_down")))}))),l.a.createElement(N.a,null),l.a.createElement(ce,{products:this.state.products,searched:!1})))}}]),t}(s.Component),pe=Object(p.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",background:e.palette.background.paper},gridList:{flexWrap:"nowrap",width:"100%",transform:"translateZ(0)"},tileTitle:{verticalAlign:"middle",lineHeight:1.9,textAlign:"center",fontSize:"1.2em",margin:"0 4px 0 0",cursor:"pointer",borderRadius:"6px"},card:{margin:"auto",marginTop:20},title:{padding:"".concat(3*e.spacing.unit,"px ").concat(2.5*e.spacing.unit,"px ").concat(2*e.spacing.unit,"px"),color:e.palette.openTitle,backgroundColor:"white",fontSize:"1.1em"},icon:{verticalAlign:"sub",color:"#738272",fontSize:"0.9em"},link:{color:"white"}}})(me),ue=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={suggestionTitle:"Latest Products",suggestions:[],categories:[]},a.componentDidMount=function(){U().then(function(e){e.error?console.log(e.error):a.setState({suggestions:e})}),V().then(function(e){e.error?console.log(e.error):a.setState({categories:e})})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(d.a,{container:!0,spacing:24},l.a.createElement(d.a,{item:!0,xs:8,sm:8},l.a.createElement(le,{categories:this.state.categories}),l.a.createElement(pe,{categories:this.state.categories})),l.a.createElement(d.a,{item:!0,xs:4,sm:4},l.a.createElement(P,{products:this.state.suggestions,title:this.state.suggestionTitle}))))}}]),t}(s.Component),de=Object(p.withStyles)(function(e){return{root:{flexGrow:1,margin:30}}})(ue),he=a(18),ge=a.n(he),fe=a(38),Ee=a.n(fe),be=a(212),ye=a.n(be),ve=a(102),Se=a.n(ve),xe=function(e){return console.log("point0"),fetch("https://lampgram.com/api-server/users/",{method:"POST",headers:{Accept:"application/json"},body:e}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},je=function(e,t){return fetch("https://lampgram.com/api-server/users/"+e.userId,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Ce=function(e,t,a){return fetch("https://lampgram.com/api-server/users/"+e.userId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t},body:a}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Oe=function(e,t){return fetch("https://lampgram.com/api-server/users/"+e.userId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},Ne=function(e,t,a){return fetch("https://lampgram.com/api-server/stripe_auth/"+e.userId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t},body:JSON.stringify({stripe:a})}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},we=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={users:[]},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://lampgram.com/api-server/users/",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)}).then(function(t){t.error?console.log(t.error):e.setState({users:t})})}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},"All Users"),l.a.createElement(ge.a,{dense:!0},this.state.users.map(function(e,t){return l.a.createElement(v.b,{to:"/user/"+e._id,key:t},l.a.createElement(he.ListItem,{button:!0},l.a.createElement(he.ListItemAvatar,null,l.a.createElement(Ee.a,null,l.a.createElement(Se.a,null))),l.a.createElement(he.ListItemText,{primary:e.name}),l.a.createElement(he.ListItemSecondaryAction,null,l.a.createElement(y.a,null,l.a.createElement(ye.a,null)))))})))}}]),t}(s.Component),Ie=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({padding:e.spacing.unit,margin:5*e.spacing.unit}),title:{margin:"".concat(4*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px"),color:e.palette.openTitle}}})(we),ke=a(51),Te=a.n(ke),Ae=a(29),De=a.n(Ae),_e=a(213),Be=a.n(_e),Le=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",avatar:"",password:"",email:"",code:"",open:!1,error:"",sent:!1},a.componentDidMount=function(){a.userData=new FormData},a.handleChange=function(e){return function(t){var n="avatar"===e?t.target.files[0]:t.target.value;a.userData.set(e,n),a.setState(Object(Y.a)({},e,n))}},a.clickSubmit=function(){xe(a.userData).then(function(e){e.error?a.setState({error:e.error}):a.setState({error:"",open:!0})})},a.clickSend=function(){a.state.email.includes("@")?(console.log("sendMail"),Be.a.post("https://lampgram.com/api-server/sendCode",{to:a.state.email},function(e){"sent"===e&&this.setState({sent:!0})})):a.setState({error:"Please, enter valid email address"})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"Sign Up"),l.a.createElement("br",null),l.a.createElement("input",{accept:"image/*",onChange:this.handleChange("avatar"),className:e.input,id:"icon-button-file",type:"file"}),l.a.createElement("label",{htmlFor:"icon-button-file"},l.a.createElement(te.a,{variant:"raised",color:"secondary",component:"span"},"Upload avatar",l.a.createElement(Te.a,null)))," ",l.a.createElement("span",{className:e.filename},this.state.avatar?this.state.avatar.name:""),l.a.createElement("br",null),l.a.createElement(X.a,{id:"name",label:"Name",className:e.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"email",type:"email",label:"Email",className:e.textField,value:this.state.email,onChange:this.handleChange("email"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"password",type:"password",label:"Password",className:e.textField,value:this.state.password,onChange:this.handleChange("password"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"code",type:"text",label:"verification code",className:e.shortTextField,value:this.state.code,onChange:this.handleChange("code"),margin:"normal"}),l.a.createElement(te.a,{color:"primary",variant:"flat",onClick:this.clickSend,className:e.sender},"Send new code"),l.a.createElement("br",null),this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:e.error},"error"),this.state.error),this.state.sent&&l.a.createElement("p",null,"Email has been sent! Please check your inbox!")),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:e.submit},"Submit"))),l.a.createElement(De.a,{open:this.state.open,disableBackdropClick:!0},l.a.createElement(Ae.DialogTitle,null,"New Account"),l.a.createElement(Ae.DialogContent,null,l.a.createElement(Ae.DialogContentText,null,"New account successfully created.")),l.a.createElement(Ae.DialogActions,null,l.a.createElement(v.b,{to:"/signin"},l.a.createElement(te.a,{color:"primary",autoFocus:"autoFocus",variant:"raised"},"Sign In")))))}}]),t}(s.Component),Fe=Object(p.withStyles)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},error:{verticalAlign:"middle"},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},shortTextField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:160},input:{display:"none"},submit:{margin:"auto",marginBottom:2*e.spacing.unit},filename:{marginLeft:"10px"}}})(Le),Pe=function(e){return fetch("https://lampgram.com/api-server/auth/signin/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},ze={isAuthenticated:function(){return"undefined"!==typeof window&&(!!sessionStorage.getItem("jwt")&&JSON.parse(sessionStorage.getItem("jwt")))},authenticate:function(e,t){"undefined"!==typeof window&&sessionStorage.setItem("jwt",JSON.stringify(e)),t()},signout:function(e){"undefined"!==typeof window&&sessionStorage.removeItem("jwt"),e(),fetch("https://lampgram.com/api-server/auth/signout/",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)}).then(function(e){document.cookie="t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"})},updateUser:function(e,t){if("undefined"!==typeof window&&sessionStorage.getItem("jwt")){var a=JSON.parse(sessionStorage.getItem("jwt"));a.user=e,sessionStorage.setItem("jwt",JSON.stringify(a)),t()}}},Re=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={email:"",password:"",error:"",redirectToReferrer:!1},a.clickSubmit=function(){var e={email:a.state.email||void 0,password:a.state.password||void 0};Pe(e).then(function(e){e.error?a.setState({error:e.error}):ze.authenticate(e,function(){a.setState({redirectToReferrer:!0})})})},a.handleChange=function(e){return function(t){a.setState(Object(Y.a)({},e,t.target.value))}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=(this.props.location.state||{from:{pathname:"/"}}).from;return this.state.redirectToReferrer?l.a.createElement(m.a,{to:t}):l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"Sign In"),l.a.createElement(X.a,{id:"email",type:"email",label:"Email",className:e.textField,value:this.state.email,onChange:this.handleChange("email"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"password",type:"password",label:"Password",className:e.textField,value:this.state.password,onChange:this.handleChange("password"),margin:"normal"}),l.a.createElement("br",null)," ",this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:e.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:e.submit},"Submit")))}}]),t}(s.Component),Me=Object(p.withStyles)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},error:{verticalAlign:"middle"},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},submit:{margin:"auto",marginBottom:2*e.spacing.unit}}})(Re),qe=a(132),Ge=a(214),We=a.n(Ge),Je=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).componentDidMount=function(){var e=ze.isAuthenticated();je({userId:a.match.params.userId},{t:e.token}).then(function(e){e.error?a.setState({error:e.error}):a.setState({name:e.name,email:e.email,seller:e.seller})})},a.clickSubmit=function(){var e=ze.isAuthenticated(),t={name:a.state.name||void 0,email:a.state.email||void 0,password:a.state.password||void 0,seller:a.state.seller};Ce({userId:a.match.params.userId},{t:e.token},t).then(function(e){e.error?a.setState({error:e.error}):ze.updateUser(e,function(){a.setState({userId:e._id,redirectToProfile:!0})})})},a.handleChange=function(e){return function(t){a.setState(Object(Y.a)({},e,t.target.value))}},a.handleCheck=function(e,t){a.setState({seller:t})},a.state={name:"",email:"",password:"",seller:!1,redirectToProfile:!1,error:""},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.redirectToProfile?l.a.createElement(m.a,{to:"/user/"+this.state.userId}):l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"Edit Profile"),l.a.createElement(X.a,{id:"name",label:"Name",className:e.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"email",type:"email",label:"Email",className:e.textField,value:this.state.email,onChange:this.handleChange("email"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"password",type:"password",label:"Password",className:e.textField,value:this.state.password,onChange:this.handleChange("password"),margin:"normal"}),l.a.createElement(E.a,{type:"subheading",component:"h4",className:e.subheading},"Seller Account"),l.a.createElement(qe.FormControlLabel,{control:l.a.createElement(We.a,{classes:{checked:e.checked,bar:e.bar},checked:this.state.seller,onChange:this.handleCheck}),label:this.state.seller?"Active":"Inactive"}),l.a.createElement("br",null)," ",this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:e.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:e.submit},"Submit")))}}]),t}(s.Component),Ue=Object(p.withStyles)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},title:{margin:2*e.spacing.unit,color:e.palette.protectedTitle},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},submit:{margin:"auto",marginBottom:2*e.spacing.unit},subheading:{marginTop:2*e.spacing.unit,color:e.palette.openTitle}}})(Je),Qe=a(69),Ve=a.n(Qe),He=a(68),Ye=a.n(He),Ke=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={redirect:!1,open:!1},a.clickButton=function(){a.setState({open:!0})},a.deleteAccount=function(){var e=ze.isAuthenticated();Oe({userId:a.props.userId},{t:e.token}).then(function(e){e.error?console.log(e.error):(ze.signout(function(){return console.log("deleted")}),a.setState({redirect:!0}))})},a.handleRequestClose=function(){a.setState({open:!1})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.redirect?l.a.createElement(m.a,{to:"/"}):l.a.createElement("span",null,l.a.createElement(y.a,{"aria-label":"Delete",onClick:this.clickButton,color:"secondary"},l.a.createElement(Ye.a,null)),l.a.createElement(De.a,{open:this.state.open,onClose:this.handleRequestClose},l.a.createElement(Ae.DialogTitle,null,"Delete Account"),l.a.createElement(Ae.DialogContent,null,l.a.createElement(Ae.DialogContentText,null,"Confirm to delete your account.")),l.a.createElement(Ae.DialogActions,null,l.a.createElement(te.a,{onClick:this.handleRequestClose,color:"primary"},"Cancel"),l.a.createElement(te.a,{onClick:this.deleteAccount,color:"secondary",autoFocus:"autoFocus"},"Confirm"))))}}]),t}(s.Component),Ze=function(e,t){return fetch("https://lampgram.com/api-server/orders/shop/"+e.shopId,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},$e=function(e,t,a){return fetch("https://lampgram.com/api-server/order/status/"+e.shopId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},Xe=function(e,t,a){return fetch("https://lampgram.com/api-server/order/"+e.shopId+"/cancel/"+e.productId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},et=function(e,t,a){return fetch("https://lampgram.com/api-server/order/"+e.orderId+"/charge/"+e.userId+"/"+e.shopId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},tt=function(){return fetch("https://lampgram.com/api-server/order/status_values",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},at=function(e,t){return fetch("https://lampgram.com/api-server/orders/user/"+e.userId,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},nt=function(e,t){return fetch("https://lampgram.com/api-server/order/"+e.orderId,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},rt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={orders:[]},a.loadOrders=function(){var e=ze.isAuthenticated();at({userId:e.user._id},{t:e.token}).then(function(e){e.error?console.log(e.error):a.setState({orders:e})})},a.componentDidMount=function(){a.loadOrders()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},"Your Orders"),l.a.createElement(ge.a,{dense:!0},this.state.orders.map(function(e,t){return l.a.createElement("span",{key:t},l.a.createElement(v.b,{to:"/order/"+e._id},l.a.createElement(he.ListItem,{button:!0},l.a.createElement(he.ListItemText,{primary:l.a.createElement("strong",null,"Order # "+e._id),secondary:new Date(e.created).toDateString()}))),l.a.createElement(N.a,null))})))}}]),t}(s.Component),ot=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"12px 24px",padding:3*e.spacing.unit,backgroundColor:"#3f3f3f0d"}),title:{margin:"".concat(2*e.spacing.unit,"px 0 12px ").concat(e.spacing.unit,"px"),color:e.palette.openTitle}}})(rt),it=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).init=function(e){var t=ze.isAuthenticated();je({userId:e},{t:t.token}).then(function(e){e.error?a.setState({redirectToSignin:!0}):a.setState({user:e})})},a.componentWillReceiveProps=function(e){a.init(e.match.params.userId)},a.componentDidMount=function(){a.init(a.match.params.userId)},a.state={user:"",redirectToSignin:!1},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.state.redirectToSignin?l.a.createElement(m.a,{to:"/signin"}):l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},"Profile"),l.a.createElement(ge.a,{dense:!0},l.a.createElement(he.ListItem,null,l.a.createElement(he.ListItemAvatar,null,l.a.createElement(Ee.a,null,l.a.createElement(Se.a,null))),l.a.createElement(he.ListItemText,{primary:this.state.user.name,secondary:this.state.user.email})," ",ze.isAuthenticated().user&&ze.isAuthenticated().user._id===this.state.user._id&&l.a.createElement(he.ListItemSecondaryAction,null,l.a.createElement(v.b,{to:"/user/edit/"+this.state.user._id},l.a.createElement(y.a,{"aria-label":"Edit",color:"primary"},l.a.createElement(Ve.a,null))),l.a.createElement(Ke,{userId:this.state.user._id}))),l.a.createElement(N.a,null),l.a.createElement(he.ListItem,null,l.a.createElement(he.ListItemText,{primary:"Joined: "+new Date(this.state.user.created).toDateString()}))),l.a.createElement(ot,null))}}]),t}(s.Component),ct=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:3*e.spacing.unit,marginTop:5*e.spacing.unit}),title:{margin:"".concat(3*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px"),color:e.palette.protectedTitle}}})(it),st=a(224),lt=function(e){var t=e.component,a=Object(st.a)(e,["component"]);return l.a.createElement(m.b,Object.assign({},a,{render:function(e){return ze.isAuthenticated()?l.a.createElement(t,e):l.a.createElement(m.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},mt=a(216),pt=a.n(mt),ut=a(217),dt=a.n(ut),ht=a(215),gt=a.n(ht),ft=function(e,t){return e.location.pathname===t?{color:"#bef67a"}:{color:"#ffffff"}},Et=function(e,t){return e.location.pathname.includes(t)?{color:"#bef67a"}:{color:"#ffffff"}},bt=Object(m.g)(function(e){var t=e.history;return l.a.createElement(pt.a,{position:"static"},l.a.createElement(dt.a,null,l.a.createElement(v.b,{to:"/"},l.a.createElement(E.a,{type:"image"},l.a.createElement("img",{alt:"Logotype",style:{height:"50px"},src:gt.a}))),l.a.createElement("div",null,l.a.createElement(v.b,{to:"/shops/all"},l.a.createElement(te.a,{style:ft(t,"/shops/all")},"All Shops")),l.a.createElement(v.b,{to:"/cart"},l.a.createElement(te.a,{style:ft(t,"/cart")},"Saved"))),l.a.createElement("div",{style:{position:"absolute",right:"10px"}},l.a.createElement("span",{style:{float:"right"}},!ze.isAuthenticated()&&l.a.createElement("span",null,l.a.createElement(v.b,{to:"/signup"},l.a.createElement(te.a,{style:ft(t,"/signup")},"Sign up")),l.a.createElement(v.b,{to:"/signin"},l.a.createElement(te.a,{style:ft(t,"/signin")},"Sign In"))),ze.isAuthenticated()&&l.a.createElement("span",null,ze.isAuthenticated().user.seller&&l.a.createElement(v.b,{to:"/seller/shops"},l.a.createElement(te.a,{style:Et(t,"/seller/")},"My Shops")),l.a.createElement(v.b,{to:"/user/"+ze.isAuthenticated().user._id},l.a.createElement(te.a,{style:ft(t,"/user/"+ze.isAuthenticated().user._id)},"My Profile")),l.a.createElement(te.a,{color:"inherit",onClick:function(){ze.signout(function(){return t.push("/")})}},"Sign out"))))))}),yt=function(e,t,a){return fetch("https://lampgram.com/api-server/shops/by/"+e.userId,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},body:a}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},vt=function(){return fetch("https://lampgram.com/api-server/shops",{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},St=function(e,t){return fetch("https://lampgram.com/api-server/shops/by/"+e.userId,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},xt=function(e,t){return fetch("https://lampgram.com/api-server/shop/"+e.shopId,{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.log(e)})},jt=function(e,t,a){return fetch("https://lampgram.com/api-server/shops/"+e.shopId,{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},body:a}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},Ct=function(e,t){return fetch("https://lampgram.com/api-server/shops/"+e.shopId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t.t}}).then(function(e){return e.json()}).catch(function(e){console.log(e)})},Ot=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",description:"",image:"",redirect:!1,error:""},a.componentDidMount=function(){a.shopData=new FormData},a.handleChange=function(e){return function(t){var n="image"===e?t.target.files[0]:t.target.value;a.shopData.set(e,n),a.setState(Object(Y.a)({},e,n))}},a.clickSubmit=function(){var e=ze.isAuthenticated();yt({userId:e.user._id},{t:e.token},a.shopData).then(function(e){e.error?a.setState({error:e.error}):a.setState({error:"",redirect:!0})})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(this.state.redirect)return l.a.createElement(m.a,{to:"/seller/shops"});var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"New Shop"),l.a.createElement("br",null),l.a.createElement("input",{accept:"image/*",onChange:this.handleChange("image"),className:e.input,id:"icon-button-file",type:"file"}),l.a.createElement("label",{htmlFor:"icon-button-file"},l.a.createElement(te.a,{variant:"raised",color:"secondary",component:"span"},"Upload Logo",l.a.createElement(Te.a,null)))," ",l.a.createElement("span",{className:e.filename},this.state.image?this.state.image.name:""),l.a.createElement("br",null),l.a.createElement(X.a,{id:"name",label:"Name",className:e.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"multiline-flexible",label:"Description",multiline:!0,rows:"2",value:this.state.description,onChange:this.handleChange("description"),className:e.textField,margin:"normal"}),l.a.createElement("br",null)," ",this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:e.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:e.submit},"Submit"),l.a.createElement(v.b,{to:"/seller/shops",className:e.submit},l.a.createElement(te.a,{variant:"raised"},"Cancel")))))}}]),t}(s.Component),Nt=Object(p.withStyles)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},error:{verticalAlign:"middle"},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle,fontSize:"1em"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},submit:{margin:"auto",marginBottom:2*e.spacing.unit},input:{display:"none"},filename:{marginLeft:"10px"}}})(Ot),wt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={shops:[]},a.loadShops=function(){vt().then(function(e){e.error?console.log(e.error):a.setState({shops:e})})},a.componentDidMount=function(){a.loadShops()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},"All Shops"),l.a.createElement(ge.a,{dense:!0},this.state.shops.map(function(t,a){return l.a.createElement(v.b,{to:"/shops/"+t._id,key:a},l.a.createElement(N.a,null),l.a.createElement(he.ListItem,{button:!0},l.a.createElement(he.ListItemAvatar,null,l.a.createElement(Ee.a,{className:e.avatar,src:"https://lampgram.com/api-server/shops/logo/"+t._id+"?"+(new Date).getTime()})),l.a.createElement("div",{className:e.details},l.a.createElement(E.a,{type:"headline",component:"h2",color:"primary",className:e.shopTitle},t.name),l.a.createElement(E.a,{type:"subheading",component:"h4",className:e.subheading},t.description))),l.a.createElement(N.a,null))}))))}}]),t}(s.Component),It=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:3*e.spacing.unit,marginTop:5*e.spacing.unit,marginBottom:3*e.spacing.unit}),title:{margin:"".concat(3*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px"),color:e.palette.protectedTitle,textAlign:"center",fontSize:"1.2em"},avatar:{width:100,height:100},subheading:{color:e.palette.text.secondary},shopTitle:{fontSize:"1.2em",marginBottom:"5px"},details:{padding:"24px"}}})(wt),kt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={open:!1},a.clickButton=function(){a.setState({open:!0})},a.deleteShop=function(){var e=ze.isAuthenticated();Ct({shopId:a.props.shop._id},{t:e.token}).then(function(e){e.error?console.log(e.error):a.setState({open:!1},function(){a.props.onRemove(a.props.shop)})})},a.handleRequestClose=function(){a.setState({open:!1})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("span",null,l.a.createElement(y.a,{"aria-label":"Delete",onClick:this.clickButton,color:"secondary"},l.a.createElement(Ye.a,null)),l.a.createElement(De.a,{open:this.state.open,onClose:this.handleRequestClose},l.a.createElement(Ae.DialogTitle,null,"Delete "+this.props.shop.name),l.a.createElement(Ae.DialogContent,null,l.a.createElement(Ae.DialogContentText,null,"Confirm to delete your shop ",this.props.shop.name,".")),l.a.createElement(Ae.DialogActions,null,l.a.createElement(te.a,{onClick:this.handleRequestClose,color:"primary"},"Cancel"),l.a.createElement(te.a,{onClick:this.deleteShop,color:"secondary",autoFocus:"autoFocus"},"Confirm"))))}}]),t}(s.Component),Tt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={shops:[],redirectToSignin:!1},a.loadShops=function(){var e=ze.isAuthenticated();St({userId:e.user._id},{t:e.token}).then(function(e){e.error?a.setState({redirectToSignin:!0}):a.setState({shops:e})})},a.removeShop=function(e){var t=a.state.shops,n=t.indexOf(e);t.splice(n,1),a.setState({shops:t})},a.componentDidMount=function(){a.loadShops()},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.redirectToSignin?l.a.createElement(m.a,{to:"/signin"}):l.a.createElement("div",null,l.a.createElement(g.a,{className:t.root,elevation:4},l.a.createElement(E.a,{type:"title",className:t.title},"Your Shops",l.a.createElement("span",{className:t.addButton},l.a.createElement(v.b,{to:"/seller/shop/new"},l.a.createElement(te.a,{color:"primary",variant:"raised"},l.a.createElement(C.a,{className:t.leftIcon},"add_box"),"  New Shop")))),l.a.createElement(ge.a,{dense:!0},this.state.shops.map(function(t,a){return l.a.createElement("span",{key:a},l.a.createElement(he.ListItem,{button:!0},l.a.createElement(he.ListItemAvatar,null,l.a.createElement(Ee.a,{src:"https://lampgram.com/api-server/shops/logo/"+t._id+"?"+(new Date).getTime()})),l.a.createElement(he.ListItemText,{primary:t.name,secondary:t.description}),ze.isAuthenticated().user&&ze.isAuthenticated().user._id===t.owner._id&&l.a.createElement(he.ListItemSecondaryAction,null,l.a.createElement(v.b,{to:"/seller/orders/"+t.name+"/"+t._id},l.a.createElement(te.a,{"aria-label":"Orders",color:"primary"},"View Orders")),l.a.createElement(v.b,{to:"/seller/shop/edit/"+t._id},l.a.createElement(y.a,{"aria-label":"Edit",color:"primary"},l.a.createElement(Ve.a,null))),l.a.createElement(kt,{shop:t,onRemove:e.removeShop}))),l.a.createElement(N.a,null))}))))}}]),t}(s.Component),At=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:3*e.spacing.unit,marginTop:5*e.spacing.unit}),title:{margin:"".concat(3*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px ").concat(e.spacing.unit,"px"),color:e.palette.protectedTitle,fontSize:"1.2em"},addButton:{float:"right"},leftIcon:{marginRight:"8px"}}})(Tt),Dt=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).loadProducts=function(){J({shopId:a.match.params.shopId}).then(function(e){e.error?a.setState({error:e.error}):a.setState({products:e})})},a.componentDidMount=function(){a.loadProducts(),xt({shopId:a.match.params.shopId}).then(function(e){e.error?a.setState({error:e.error}):a.setState({shop:e})})},a.state={shop:"",products:[]},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.shop._id?"https://lampgram.com/api-server/shops/logo/".concat(this.state.shop._id,"?").concat((new Date).getTime()):"https://lampgram.com/api-server/shops/defaultphoto",t=this.props.classes;return l.a.createElement("div",{className:t.root},l.a.createElement(d.a,{container:!0,spacing:24},l.a.createElement(d.a,{item:!0,xs:4,sm:4},l.a.createElement(I.a,{className:t.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:t.title},this.state.shop.name),l.a.createElement("br",null),l.a.createElement(Ee.a,{src:e,className:t.bigAvatar}),l.a.createElement("br",null),l.a.createElement(E.a,{type:"subheading",component:"h2",className:t.subheading},this.state.shop.description),l.a.createElement("br",null)))),l.a.createElement(d.a,{item:!0,xs:8,sm:8},l.a.createElement(I.a,null,l.a.createElement(E.a,{type:"title",component:"h2",className:t.productTitle},"Products"),l.a.createElement(ce,{products:this.state.products,searched:!1})))))}}]),t}(s.Component),_t=Object(p.withStyles)(function(e){return{root:{flexGrow:1,margin:30},card:{textAlign:"center",paddingBottom:2*e.spacing.unit},title:{margin:2*e.spacing.unit,color:e.palette.protectedTitle,fontSize:"1.2em"},subheading:{marginTop:e.spacing.unit,color:e.palette.openTitle},bigAvatar:{width:100,height:100,margin:"auto"},productTitle:{padding:"".concat(3*e.spacing.unit,"px ").concat(2.5*e.spacing.unit,"px ").concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px"),color:e.palette.openTitle,width:"100%",fontSize:"1.2em"}}})(Dt),Bt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={open:!1},a.clickButton=function(){a.setState({open:!0})},a.deleteProduct=function(){var e=ze.isAuthenticated();W({shopId:a.props.shopId,productId:a.props.product._id},{t:e.token}).then(function(e){e.error?console.log(e.error):a.setState({open:!1},function(){a.props.onRemove(a.props.product)})})},a.handleRequestClose=function(){a.setState({open:!1})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("span",null,l.a.createElement(y.a,{"aria-label":"Delete",onClick:this.clickButton,color:"secondary"},l.a.createElement(Ye.a,null)),l.a.createElement(De.a,{open:this.state.open,onClose:this.handleRequestClose},l.a.createElement(Ae.DialogTitle,null,"Delete "+this.props.product.name),l.a.createElement(Ae.DialogContent,null,l.a.createElement(Ae.DialogContentText,null,"Confirm to delete your product ",this.props.product.name,".")),l.a.createElement(Ae.DialogActions,null,l.a.createElement(te.a,{onClick:this.handleRequestClose,color:"primary"},"Cancel"),l.a.createElement(te.a,{onClick:this.deleteProduct,color:"secondary",autoFocus:"autoFocus"},"Confirm"))))}}]),t}(s.Component),Lt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={products:[]},a.loadProducts=function(){J({shopId:a.props.shopId}).then(function(e){e.error?a.setState({error:e.error}):a.setState({products:e})})},a.componentDidMount=function(){a.loadProducts()},a.removeProduct=function(e){var t=a.state.products,n=t.indexOf(e);t.splice(n,1),a.setState({shops:t})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement(I.a,{className:t.products},l.a.createElement(E.a,{type:"title",className:t.title},"Products",l.a.createElement("span",{className:t.addButton},l.a.createElement(v.b,{to:"/seller/"+this.props.shopId+"/products/new"},l.a.createElement(te.a,{color:"primary",variant:"raised"},l.a.createElement(C.a,{className:t.leftIcon},"add_box"),"  New Product")))),l.a.createElement(ge.a,{dense:!0},this.state.products.map(function(a,n){return l.a.createElement("span",{key:n},l.a.createElement(he.ListItem,null,l.a.createElement(w.CardMedia,{className:t.cover,image:"https://lampgram.com/api-server/product/image/"+a._id+"?"+(new Date).getTime(),title:a.name}),l.a.createElement("div",{className:t.details},l.a.createElement(E.a,{type:"headline",component:"h2",color:"primary",className:t.productTitle},a.name),l.a.createElement(E.a,{type:"subheading",component:"h4",className:t.subheading},"Quantity: ",a.quantity," | Price: ",a.price)),l.a.createElement(he.ListItemSecondaryAction,null,l.a.createElement(v.b,{to:"/seller/"+a.shop._id+"/"+a._id+"/edit"},l.a.createElement(y.a,{"aria-label":"Edit",color:"primary"},l.a.createElement(Ve.a,null))),l.a.createElement(Bt,{product:a,shopId:e.props.shopId,onRemove:e.removeProduct}))),l.a.createElement(N.a,null))})))}}]),t}(s.Component),Ft=Object(p.withStyles)(function(e){return{products:{padding:"24px"},addButton:{float:"right"},leftIcon:{marginRight:"8px"},title:{margin:2*e.spacing.unit,color:e.palette.protectedTitle,fontSize:"1.2em"},subheading:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},cover:{width:110,height:100,margin:"8px"},details:{padding:"10px"}}})(Lt),Pt=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).componentDidMount=function(){a.shopData=new FormData;var e=ze.isAuthenticated();xt({shopId:a.match.params.shopId},{t:e.token}).then(function(e){e.error?a.setState({error:e.error}):a.setState({id:e._id,name:e.name,description:e.description,owner:e.owner.name})})},a.clickSubmit=function(){var e=ze.isAuthenticated();jt({shopId:a.match.params.shopId},{t:e.token},a.shopData).then(function(e){e.error?a.setState({error:e.error}):a.setState({redirect:!0})})},a.handleChange=function(e){return function(t){var n="image"===e?t.target.files[0]:t.target.value;a.shopData.set(e,n),a.setState(Object(Y.a)({},e,n))}},a.state={name:"",description:"",image:"",redirect:!1,error:""},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.id?"https://lampgram.com/api-server/shops/logo/".concat(this.state.id,"?").concat((new Date).getTime()):"https://lampgram.com/api-server/shops/defaultphoto";if(this.state.redirect)return l.a.createElement(m.a,{to:"/seller/shops"});var t=this.props.classes;return l.a.createElement("div",{className:t.root},l.a.createElement(d.a,{container:!0,spacing:24},l.a.createElement(d.a,{item:!0,xs:6,sm:6},l.a.createElement(I.a,{className:t.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:t.title},"Edit Shop"),l.a.createElement("br",null),l.a.createElement(Ee.a,{src:e,className:t.bigAvatar}),l.a.createElement("br",null),l.a.createElement("input",{accept:"image/*",onChange:this.handleChange("image"),className:t.input,id:"icon-button-file",type:"file"}),l.a.createElement("label",{htmlFor:"icon-button-file"},l.a.createElement(te.a,{variant:"raised",color:"default",component:"span"},"Change Logo",l.a.createElement(Te.a,null)))," ",l.a.createElement("span",{className:t.filename},this.state.image?this.state.image.name:""),l.a.createElement("br",null),l.a.createElement(X.a,{id:"name",label:"Name",className:t.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"multiline-flexible",label:"Description",multiline:!0,rows:"3",value:this.state.description,onChange:this.handleChange("description"),className:t.textField,margin:"normal"}),l.a.createElement("br",null),l.a.createElement(E.a,{type:"subheading",component:"h4",className:t.subheading},"Owner: ",this.state.owner),l.a.createElement("br",null),this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:t.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:t.submit},"Update")))),l.a.createElement(d.a,{item:!0,xs:6,sm:6},l.a.createElement(Ft,{shopId:this.match.params.shopId}))))}}]),t}(s.Component),zt=Object(p.withStyles)(function(e){return{root:{flexGrow:1,margin:30},card:{textAlign:"center",paddingBottom:2*e.spacing.unit},title:{margin:2*e.spacing.unit,color:e.palette.protectedTitle,fontSize:"1.2em"},subheading:{marginTop:2*e.spacing.unit,color:e.palette.openTitle},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},submit:{margin:"auto",marginBottom:2*e.spacing.unit},bigAvatar:{width:60,height:60,margin:"auto"},input:{display:"none"},filename:{marginLeft:"10px"}}})(Pt),Rt=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).componentDidMount=function(){a.productData=new FormData},a.handleChange=function(e){return function(t){if("image"===e){var n=Array.from(t.target.files).slice(0,8);n.forEach(function(t,n){a.productData.set(e+n,t)}),a.setState(Object(Y.a)({},e,n))}else{var r=t.target.value;a.productData.set(e,r),a.setState(Object(Y.a)({},e,r))}}},a.clickSubmit=function(){var e=ze.isAuthenticated();M({shopId:a.match.params.shopId},{t:e.token},a.productData).then(function(e){e.error?(console.log("This is really error"),a.setState({error:e.error})):(console.log("So?"),a.setState({error:"",redirect:!0}))})},a.state={name:"",description:"",images:[],category:"",quantity:"",price:"",redirect:!1,error:""},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(this.state.redirect)return l.a.createElement(m.a,{to:"/seller/shop/edit/"+this.match.params.shopId});var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:e.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"New Product"),l.a.createElement("br",null),l.a.createElement("input",{accept:"image/*",onChange:this.handleChange("image"),className:e.input,id:"icon-button-file",type:"file",multiple:"multiple"}),l.a.createElement("label",{htmlFor:"icon-button-file"},l.a.createElement(te.a,{variant:"raised",color:"secondary",component:"span"},"Upload Photos, up to 8",l.a.createElement(Te.a,null)))," ",l.a.createElement("span",{className:e.filename},""),l.a.createElement("br",null),l.a.createElement(X.a,{id:"name",label:"Name",className:e.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"multiline-flexible",label:"Description",multiline:!0,rows:"2",value:this.state.description,onChange:this.handleChange("description"),className:e.textField,margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"category",label:"Category",className:e.textField,value:this.state.category,onChange:this.handleChange("category"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"quantity",label:"Quantity",className:e.textField,value:this.state.quantity,onChange:this.handleChange("quantity"),type:"number",margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"price",label:"Price",className:e.textField,value:this.state.price,onChange:this.handleChange("price"),type:"text",margin:"normal"}),l.a.createElement("br",null),this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:e.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:e.submit},"Submit"),l.a.createElement(v.b,{to:"/seller/shop/edit/"+this.match.params.shopId,className:e.submit},l.a.createElement(te.a,{variant:"raised"},"Cancel")))))}}]),t}(s.Component),Mt=Object(p.withStyles)(function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:5*e.spacing.unit,paddingBottom:2*e.spacing.unit},error:{verticalAlign:"middle"},title:{marginTop:2*e.spacing.unit,color:e.palette.openTitle,fontSize:"1.2em"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:300},submit:{margin:"auto",marginBottom:2*e.spacing.unit},input:{display:"none"},filename:{marginLeft:"10px"}}})(Rt),qt=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).componentDidMount=function(){a.productData=new FormData,q({productId:a.match.params.productId}).then(function(e){e.error?a.setState({error:e.error}):a.setState({id:e._id,name:e.name,description:e.description,category:e.category,quantity:e.quantity,price:e.price})})},a.clickSubmit=function(){var e=ze.isAuthenticated();G({shopId:a.match.params.shopId,productId:a.match.params.productId},{t:e.token},a.productData).then(function(e){e.error?a.setState({error:e.error}):a.setState({redirect:!0})})},a.handleChange=function(e){return function(t){if("image"===e){console.log(t.target.files);var n=Array.from(t.target.files).slice(0,8);n.forEach(function(t,n){a.productData.set(e+n,t)}),a.setState(Object(Y.a)({},e,n))}else{var r=t.target.value;a.productData.set(e,r),a.setState(Object(Y.a)({},e,r))}}},a.state={name:"",description:"",images:[],category:"",quantity:"",price:"",redirect:!1,error:""},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.id?"https://lampgram.com/api-server/product/image/".concat(this.state.id,"?").concat((new Date).getTime()):"https://lampgram.com/api-server/product/defaultphoto";if(this.state.redirect)return l.a.createElement(m.a,{to:"/seller/shop/edit/"+this.match.params.shopId});var t=this.props.classes;return l.a.createElement("div",null,l.a.createElement(I.a,{className:t.card},l.a.createElement(w.CardContent,null,l.a.createElement(E.a,{type:"headline",component:"h2",className:t.title},"Edit Product"),l.a.createElement("br",null),l.a.createElement(Ee.a,{src:e,className:t.bigAvatar}),l.a.createElement("br",null),l.a.createElement("input",{accept:"image/*",onChange:this.handleChange("image"),className:t.input,id:"icon-button-file",type:"file",multiple:"multiple"}),l.a.createElement("label",{htmlFor:"icon-button-file"},l.a.createElement(te.a,{variant:"raised",color:"secondary",component:"span"},"Upload new photos, up to 8",l.a.createElement(Te.a,null)))," ",l.a.createElement("span",{className:t.filename},""),l.a.createElement("br",null),l.a.createElement(X.a,{id:"name",label:"Name",className:t.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"multiline-flexible",label:"Description",multiline:!0,rows:"3",value:this.state.description,onChange:this.handleChange("description"),className:t.textField,margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"category",label:"Category",className:t.textField,value:this.state.category,onChange:this.handleChange("category"),margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"quantity",label:"Quantity",className:t.textField,value:this.state.quantity,onChange:this.handleChange("quantity"),type:"number",margin:"normal"}),l.a.createElement("br",null),l.a.createElement(X.a,{id:"price",label:"Price",className:t.textField,value:this.state.price,onChange:this.handleChange("price"),type:"text",margin:"normal"}),l.a.createElement("br",null),this.state.error&&l.a.createElement(E.a,{component:"p",color:"error"},l.a.createElement(C.a,{color:"error",className:t.error},"error"),this.state.error)),l.a.createElement(w.CardActions,null,l.a.createElement(te.a,{color:"primary",variant:"raised",onClick:this.clickSubmit,className:t.submit},"Update"),l.a.createElement(v.b,{to:"/seller/shops/edit/"+this.match.params.shopId,className:t.submit},l.a.createElement(te.a,{variant:"raised"},"Cancel")))))}}]),t}(s.Component),Gt=Object(p.withStyles)(function(e){return{card:{margin:"auto",textAlign:"center",marginTop:3*e.spacing.unit,marginBottom:2*e.spacing.unit,maxWidth:500,paddingBottom:2*e.spacing.unit},title:{margin:2*e.spacing.unit,color:e.palette.protectedTitle,fontSize:"1.2em"},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400},submit:{margin:"auto",marginBottom:2*e.spacing.unit},bigAvatar:{width:60,height:60,margin:"auto"},input:{display:"none"},filename:{marginLeft:"10px"}}})(qt),Wt=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).loadProduct=function(e){q({productId:e}).then(function(e){e.error?a.setState({error:e.error}):(a.setState({product:e}),Q({productId:e._id}).then(function(e){e.error?console.log(e.error):a.setState({suggestions:e})}))})},a.componentDidMount=function(){a.loadProduct(a.match.params.productId)},a.componentWillReceiveProps=function(e){a.loadProduct(e.match.params.productId)},a.state={product:{shop:{}},suggestions:[],suggestionTitle:"Related Products"},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.product._id?"https://lampgram.com/api-server/product/image/".concat(this.state.product._id,"?").concat((new Date).getTime()):"https://lampgram.com/api-server/product/defaultphoto",t=this.props.classes;return l.a.createElement("div",{className:t.root},l.a.createElement(d.a,{container:!0,spacing:40},l.a.createElement(d.a,{item:!0,xs:7,sm:7},l.a.createElement(I.a,{className:t.card},l.a.createElement(w.CardHeader,{title:this.state.product.name,subheader:this.state.product.quantity>0?"In Stock":"Out of Stock",action:l.a.createElement("span",{className:t.action},l.a.createElement(L,{cartStyle:t.addCart,item:this.state.product}))}),l.a.createElement("div",{className:t.flex},l.a.createElement(w.CardMedia,{className:t.media,image:e,title:this.state.product.name}),l.a.createElement(E.a,{component:"p",type:"subheading",className:t.subheading},this.state.product.description,l.a.createElement("br",null),l.a.createElement("span",{className:t.price}," ",this.state.product.price),l.a.createElement(v.b,{to:"/shops/"+this.state.product.shop._id,className:t.link},l.a.createElement("span",null,l.a.createElement(C.a,{className:t.icon},"shopping_basket")," ",this.state.product.shop.name)))))),this.state.suggestions.length>0&&l.a.createElement(d.a,{item:!0,xs:5,sm:5},l.a.createElement(P,{products:this.state.suggestions,title:"Related Products"}))))}}]),t}(s.Component),Jt=Object(p.withStyles)(function(e){return{root:{flexGrow:1,margin:30},flex:{display:"flex"},card:{padding:"24px 40px 40px"},subheading:{margin:"24px",color:e.palette.openTitle},price:{padding:"16px",margin:"16px 0px",display:"flex",backgroundColor:"#93c5ae3d",fontSize:"1.3em",color:"#375a53"},media:{height:200,display:"inline-block",width:"50%",marginLeft:"24px"},icon:{verticalAlign:"sub"},link:{color:"#3e4c54b3",fontSize:"0.9em"},addCart:{width:"35px",height:"35px",padding:"10px 12px",borderRadius:"0.25em",backgroundColor:"#5f7c8b"},action:{margin:"8px 24px",display:"inline-block"}}})(Wt),Ut=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={cartItems:[]},a.componentDidMount=function(){a.setState({cartItems:_.getCart()})},a.handleChange=function(e){return function(t){var n=a.state.cartItems;0===t.target.value?n[e].quantity=1:n[e].quantity=t.target.value,a.setState({cartItems:n}),_.updateCart(e,t.target.value)}},a.removeItem=function(e){return function(t){var n=_.removeItem(e);0===n.length&&a.props.setCheckout(!1),a.setState({cartItems:n})}},a.openCheckout=function(){a.props.setCheckout(!0)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"getTotal",value:function(){return this.state.cartItems.reduce(function(e,t){return e+t.quantity*t.product.price},0)}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement(I.a,{className:t.card},l.a.createElement(E.a,{type:"title",className:t.title},"Saved Items"),this.state.cartItems.length>0?l.a.createElement("span",null,this.state.cartItems.map(function(a,n){return l.a.createElement("span",{key:n},l.a.createElement(I.a,{className:t.cart},l.a.createElement(w.CardMedia,{className:t.cover,image:"https://lampgram.com/api-server/product/image/"+a.product._id,title:a.product.name}),l.a.createElement("div",{className:t.details},l.a.createElement(w.CardContent,{className:t.content},l.a.createElement(v.b,{to:"/product/"+a.product._id},l.a.createElement(E.a,{type:"title",component:"h3",className:t.productTitle,color:"primary"},a.product.name)),l.a.createElement("div",null,l.a.createElement(E.a,{type:"subheading",component:"h3",className:t.price,color:"primary"}," ",a.product.price),l.a.createElement("span",{className:t.itemShop},"Shop: ",a.product.shop.name))),l.a.createElement("div",{className:t.subheading},l.a.createElement(te.a,{className:t.removeButton,color:"primary",onClick:e.removeItem(n)},"Remove")))),l.a.createElement(N.a,null))}),l.a.createElement("div",{className:t.checkout},l.a.createElement(v.b,{to:"/",className:t.continueBtn},l.a.createElement(te.a,{color:"primary",variant:"raised"},"Continue Shopping")))):l.a.createElement(E.a,{type:"subheading",component:"h3",color:"primary"},"No items have been saved for later."))}}]),t}(s.Component),Qt=Object(p.withStyles)(function(e){return{card:{margin:"24px 0px",padding:"16px 40px 60px 40px",backgroundColor:"#80808017"},title:{margin:2*e.spacing.unit,color:e.palette.openTitle,fontSize:"1.2em"},price:{color:e.palette.text.secondary,display:"inline"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,marginTop:0,width:50},productTitle:{fontSize:"1.15em",marginBottom:"5px"},subheading:{color:"rgba(88, 114, 128, 0.67)",padding:"8px 10px 0",cursor:"pointer",display:"inline-block"},cart:{width:"100%",display:"inline-flex"},details:{display:"inline-block",width:"100%",padding:"4px"},content:{flex:"1 0 auto",padding:"16px 8px 0px"},cover:{width:160,height:125,margin:"8px"},itemTotal:{float:"right",marginRight:"40px",fontSize:"1.2em",color:"rgb(72, 175, 148)"},checkout:{float:"right",margin:"24px"},total:{fontSize:"1.2em",color:"rgb(53, 97, 85)",marginRight:"16px",fontWeight:"600",verticalAlign:"bottom"},continueBtn:{marginLeft:"10px"},itemShop:{display:"block",fontSize:"0.90em",color:"#78948f"},removeButton:{fontSize:"0.8em"}}})(Ut),Vt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={checkout:!1},a.setCheckout=function(e){a.setState({checkout:e})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",{className:e.root},l.a.createElement(d.a,{container:!0,spacing:24},l.a.createElement(d.a,{item:!0,xs:6,sm:6},l.a.createElement(Qt,{checkout:this.state.checkout,setCheckout:this.setCheckout}))))}}]),t}(s.Component),Ht=Object(p.withStyles)(function(e){return{root:{flexGrow:1,margin:30}}})(Vt),Yt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={error:!1,connecting:!1,connected:!1},a.componentDidMount=function(){var e=R.a.parse(a.props.location.search);if(e.error&&a.setState({error:!0}),e.code){a.setState({connecting:!0,error:!1});var t=ze.isAuthenticated();Ne({userId:t.user._id},{t:t.token},e.code).then(function(e){e.error?a.setState({error:!0,connected:!1,connecting:!1}):a.setState({connected:!0,connecting:!1,error:!1})})}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement("div",null,l.a.createElement(g.a,{className:e.root,elevation:4},l.a.createElement(E.a,{type:"title",className:e.title},"Connect your Stripe Account"),this.state.error&&l.a.createElement(E.a,{type:"subheading",className:e.subheading},"Could not connect your Stripe account. Try again later."),this.state.connecting&&l.a.createElement(E.a,{type:"subheading",className:e.subheading},"Connecting your Stripe account ..."),this.state.connected&&l.a.createElement(E.a,{type:"subheading",className:e.subheading},"Your Stripe account successfully connected!")))}}]),t}(s.Component),Kt=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:3*e.spacing.unit,marginTop:5*e.spacing.unit}),title:{margin:"".concat(3*e.spacing.unit,"px 0 ").concat(2*e.spacing.unit,"px ").concat(2*e.spacing.unit,"px"),color:e.palette.protectedTitle,fontSize:"1.1em"},subheading:{color:e.palette.openTitle,marginLeft:"24px"}}})(Yt),Zt=a(218),$t=a.n(Zt),Xt=a(219),ea=a.n(Xt),ta=a(220),aa=a.n(ta),na=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={open:0,statusValues:[],error:""},a.loadStatusValues=function(){tt().then(function(e){e.error?a.setState({error:"Could not get status"}):a.setState({statusValues:e,error:""})})},a.componentDidMount=function(){a.loadStatusValues()},a.handleStatusChange=function(e){return function(t){var n=a.props.order;n.products[e].status=t.target.value;var r=n.products[e],o=ze.isAuthenticated();"Cancelled"===t.target.value?Xe({shopId:a.props.shopId,productId:r.product._id},{t:o.token},{cartItemId:r._id,status:t.target.value,quantity:r.quantity}).then(function(e){e.error?a.setState({error:"Status not updated, try again"}):(a.props.updateOrders(a.props.orderIndex,n),a.setState({error:""}))}):"Processing"===t.target.value?et({userId:o.user._id,shopId:a.props.shopId,orderId:n._id},{t:o.token},{cartItemId:r._id,status:t.target.value,amount:r.quantity*r.product.price}).then(function(e){e.error?a.setState({error:"Status not updated, try again"}):(a.props.updateOrders(a.props.orderIndex,n),a.setState({error:""}))}):$e({shopId:a.props.shopId},{t:o.token},{cartItemId:r._id,status:t.target.value}).then(function(e){e.error?a.setState({error:"Status not updated, try again"}):(a.props.updateOrders(a.props.orderIndex,n),a.setState({error:""}))})}},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",null,l.a.createElement(E.a,{component:"span",color:"error",className:t.statusMessage},this.state.error),l.a.createElement(ge.a,{disablePadding:!0,style:{backgroundColor:"#f8f8f8"}},this.props.order.products.map(function(a,n){return l.a.createElement("span",{key:n},a.shop===e.props.shopId&&l.a.createElement(he.ListItem,{button:!0,className:t.nested},l.a.createElement(he.ListItemText,{primary:l.a.createElement("div",null,l.a.createElement("img",{alt:"profile",className:t.listImg,src:"https://lampgram.com/api-server/product/image/"+a.product._id}),l.a.createElement("div",{className:t.listDetails},a.product.name,l.a.createElement("p",{className:t.listQty},"Quantity: "+a.quantity)))}),l.a.createElement(X.a,{id:"select-status",select:!0,label:"Update Status",className:t.textField,value:a.status,onChange:e.handleStatusChange(n),SelectProps:{MenuProps:{className:t.menu}},margin:"normal"},e.state.statusValues.map(function(e){return l.a.createElement(Z.a,{key:e,value:e},e)}))),l.a.createElement(N.a,{style:{margin:"auto",width:"80%"}}))})))}}]),t}(s.Component),ra=Object(p.withStyles)(function(e){return{nested:{paddingLeft:4*e.spacing.unit,paddingBottom:0},listImg:{width:"70px",verticalAlign:"top",marginRight:"10px"},listDetails:{display:"inline-block"},listQty:{margin:0,fontSize:"0.9em",color:"#5f7c8b"},textField:{width:"160px",marginRight:"16px"},statusMessage:{position:"absolute",zIndex:"12",right:"5px",padding:"5px"}}})(na),oa=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).loadOrders=function(){var e=ze.isAuthenticated();Ze({shopId:a.match.params.shopId},{t:e.token}).then(function(e){e.error?console.log(e):a.setState({orders:e})})},a.componentDidMount=function(){a.loadOrders()},a.handleClick=function(e){return function(t){a.setState({open:e})}},a.updateOrders=function(e,t){var n=a.state.orders;n[e]=t,a.setState({orders:n})},a.state={open:0,orders:[]},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",null,l.a.createElement(g.a,{className:t.root,elevation:4},l.a.createElement(E.a,{type:"title",className:t.title},"Orders in ",this.match.params.shop),l.a.createElement(ge.a,{dense:!0},this.state.orders.map(function(a,n){return l.a.createElement("span",{key:n},l.a.createElement(he.ListItem,{button:!0,onClick:e.handleClick(n)},l.a.createElement(he.ListItemText,{primary:"Order # "+a._id,secondary:new Date(a.created).toDateString()}),e.state.open===n?l.a.createElement($t.a,null):l.a.createElement(ea.a,null)),l.a.createElement(N.a,null),l.a.createElement(aa.a,{component:"li",in:e.state.open===n,timeout:"auto",unmountOnExit:!0},l.a.createElement(ra,{shopId:e.match.params.shopId,order:a,orderIndex:n,updateOrders:e.updateOrders}),l.a.createElement("div",{className:t.customerDetails},l.a.createElement(E.a,{type:"subheading",component:"h3",className:t.subheading},"Deliver to:"),l.a.createElement(E.a,{type:"subheading",component:"h3",color:"primary"},l.a.createElement("strong",null,a.customer_name)," (",a.customer_email,")"),l.a.createElement(E.a,{type:"subheading",component:"h3",color:"primary"},a.delivery_address.street),l.a.createElement(E.a,{type:"subheading",component:"h3",color:"primary"},a.delivery_address.city,", ",a.delivery_address.state," ",a.delivery_address.zipcode),l.a.createElement(E.a,{type:"subheading",component:"h3",color:"primary"},a.delivery_address.country),l.a.createElement("br",null))),l.a.createElement(N.a,null))}))))}}]),t}(s.Component),ia=Object(p.withStyles)(function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:3*e.spacing.unit,marginTop:5*e.spacing.unit}),title:{margin:"".concat(3*e.spacing.unit,"px 0 ").concat(3*e.spacing.unit,"px ").concat(e.spacing.unit,"px"),color:e.palette.protectedTitle,fontSize:"1.2em"},subheading:{marginTop:e.spacing.unit,color:"black",fontSize:"1.1em"},customerDetails:{paddingLeft:"36px",paddingTop:"16px",backgroundColor:"#f8f8f8"}}})(oa),ca=function(e){function t(e){var a,r=e.match;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this))).componentDidMount=function(){nt({orderId:a.match.params.orderId}).then(function(e){e.error?a.setState({error:e.error}):a.setState({order:e})})},a.state={order:{products:[],delivery_address:{}}},a.match=r,a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"getTotal",value:function(){return this.state.order.products.reduce(function(e,t){return e+("Cancelled"===t.status?0:t.quantity)*t.product.price},0)}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(I.a,{className:e.card},l.a.createElement(E.a,{type:"headline",component:"h2",className:e.title},"Order Details"),l.a.createElement(E.a,{type:"subheading",component:"h2",className:e.subheading},"Order Code: ",l.a.createElement("strong",null,this.state.order._id)," ",l.a.createElement("br",null)," Placed on ",new Date(this.state.order.created).toDateString()),l.a.createElement("br",null),l.a.createElement(d.a,{container:!0,spacing:8},l.a.createElement(d.a,{item:!0,xs:7,sm:7},l.a.createElement(I.a,{className:e.innerCardItems},this.state.order.products.map(function(t,a){return l.a.createElement("span",{key:a},l.a.createElement(I.a,{className:e.cart},l.a.createElement(w.CardMedia,{className:e.cover,image:"https://lampgram.com/api-server/product/image/"+t.product._id,title:t.product.name}),l.a.createElement("div",{className:e.details},l.a.createElement(w.CardContent,{className:e.content},l.a.createElement(v.b,{to:"/product/"+t.product._id},l.a.createElement(E.a,{type:"title",component:"h3",className:e.productTitle,color:"primary"},t.product.name)),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.itemShop,color:"primary"},t.product.price," x ",t.quantity),l.a.createElement("span",{className:e.itemShop},"Shop: ",t.shop.name),l.a.createElement(E.a,{type:"subheading",component:"h3",color:"Cancelled"===t.status?"error":"secondary"},"Status: ",t.status)))),l.a.createElement(N.a,null))}),l.a.createElement("div",{className:e.checkout}))),l.a.createElement(d.a,{item:!0,xs:5,sm:5},l.a.createElement(I.a,{className:e.innerCard},l.a.createElement(E.a,{type:"subheading",component:"h2",className:e.productTitle,color:"primary"},"Deliver to:"),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.info,color:"primary"},l.a.createElement("strong",null,this.state.order.customer_name)),l.a.createElement("br",null),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.info,color:"primary"},this.state.order.customer_email),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(N.a,null),l.a.createElement("br",null),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.itemShop,color:"primary"},this.state.order.delivery_address.street),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.itemShop,color:"primary"},this.state.order.delivery_address.city,", ",this.state.order.delivery_address.state," ",this.state.order.delivery_address.zipcode),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.itemShop,color:"primary"},this.state.order.delivery_address.country),l.a.createElement("br",null),l.a.createElement(E.a,{type:"subheading",component:"h3",className:e.thanks,color:"primary"},"Thank you for shopping with us! ",l.a.createElement("br",null),"You can track the status of your purchased items on this page.")))))}}]),t}(s.Component),sa=Object(p.withStyles)(function(e){return{card:{textAlign:"center",paddingTop:e.spacing.unit,paddingBottom:2*e.spacing.unit,flexGrow:1,margin:30},cart:{textAlign:"left",width:"100%",display:"inline-flex"},details:{display:"inline-block",width:"100%",padding:"4px"},content:{flex:"1 0 auto",padding:"16px 8px 0px"},cover:{width:160,height:125,margin:"8px"},info:{color:"rgba(83, 170, 146, 0.82)",fontSize:"0.95rem",display:"inline"},thanks:{color:"rgb(136, 183, 107)",fontSize:"0.9rem",fontStyle:"italic"},innerCardItems:{textAlign:"left",margin:"24px 10px 24px 24px",padding:"24px 20px 40px 20px",backgroundColor:"#80808017"},innerCard:{textAlign:"left",margin:"24px 24px 24px 10px",padding:"30px 45px 40px 45px",backgroundColor:"#80808017"},title:{marginTop:2*e.spacing.unit,marginBottom:e.spacing.unit,color:e.palette.protectedTitle,fontSize:"1.2em"},subheading:{marginTop:e.spacing.unit,color:e.palette.openTitle},productTitle:{fontSize:"1.15em",marginBottom:"5px"},itemTotal:{float:"right",marginRight:"40px",fontSize:"1.5em",color:"rgb(72, 175, 148)"},itemShop:{display:"block",fontSize:"1em",color:"#78948f"},checkout:{float:"right",margin:"24px"},total:{fontSize:"1.2em",color:"rgb(53, 97, 85)",marginRight:"16px",fontWeight:"600",verticalAlign:"bottom"}}})(ca),la=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("jss-server-side");e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(bt,null),l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/",component:de}),l.a.createElement(m.b,{path:"/users",component:Ie}),l.a.createElement(m.b,{path:"/signup",component:Fe}),l.a.createElement(m.b,{path:"/signin",component:Me}),l.a.createElement(lt,{path:"/user/edit/:userId",component:Ue}),l.a.createElement(m.b,{path:"/user/:userId",component:ct}),l.a.createElement(m.b,{path:"/cart",component:Ht}),l.a.createElement(m.b,{path:"/product/:productId",component:Jt}),l.a.createElement(m.b,{path:"/shops/all",component:It}),l.a.createElement(m.b,{path:"/shops/:shopId",component:_t}),l.a.createElement(m.b,{path:"/order/:orderId",component:sa}),l.a.createElement(lt,{path:"/seller/orders/:shop/:shopId",component:ia}),l.a.createElement(lt,{path:"/seller/shops",component:At}),l.a.createElement(lt,{path:"/seller/shop/new",component:Nt}),l.a.createElement(lt,{path:"/seller/shop/edit/:shopId",component:zt}),l.a.createElement(lt,{path:"/seller/:shopId/products/new",component:Mt}),l.a.createElement(lt,{path:"/seller/:shopId/:productId/edit",component:Gt}),l.a.createElement(m.b,{path:"/seller/stripe/connect",component:Kt})))}}]),t}(s.Component);t.a=la},225:function(e,t,a){e.exports=a(499)},499:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(41),i=a(204);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.hydrate)(r.a.createElement(i.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[225,1,2]]]);
//# sourceMappingURL=main.346ea570.chunk.js.map